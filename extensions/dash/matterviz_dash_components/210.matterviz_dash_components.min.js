'use strict'
;(this.webpackChunkmatterviz_dash_components =
  this.webpackChunkmatterviz_dash_components || []).push([[210], {
    210(t, e, n) {
      n.d(e, { STLExporter: () => r })
      var o = n(4922)
      class r {
        parse(t, e = {}) {
          const n = (e = Object.assign({ binary: !1 }, e)).binary, r = []
          let s, a = 0
          t.traverse(function (t) {
            if (t.isMesh) {
              const e = t.geometry, n = e.index, o = e.getAttribute(`position`)
              a += null !== n ? n.count / 3 : o.count / 3,
                r.push({ object3d: t, geometry: e })
            }
          })
          let i = 80
          if (!0 === n) {
            const t = new ArrayBuffer(2 * a + 3 * a * 4 * 4 + 80 + 4)
            s = new DataView(t), s.setUint32(i, a, !0), i += 4
          } else s = ``, s += `solid exported\n`
          const l = new o.Pq0(),
            c = new o.Pq0(),
            u = new o.Pq0(),
            p = new o.Pq0(),
            f = new o.Pq0(),
            m = new o.Pq0()
          for (let t = 0, e = r.length; t < e; t++) {
            const e = r[t].object3d,
              n = r[t].geometry,
              o = n.index,
              s = n.getAttribute(`position`)
            if (null !== o) {
              for (let t = 0; t < o.count; t += 3) {
                d(o.getX(t + 0), o.getX(t + 1), o.getX(t + 2), s, e)
              }
            } else for (let t = 0; t < s.count; t += 3) d(t + 0, t + 1, t + 2, s, e)
          }
          return !1 === n && (s += `endsolid exported\n`), s
          function d(t, e, o, r, a) {
            l.fromBufferAttribute(r, t),
              c.fromBufferAttribute(r, e),
              u.fromBufferAttribute(r, o),
              !0 === a.isSkinnedMesh &&
              (a.applyBoneTransform(t, l),
                a.applyBoneTransform(e, c),
                a.applyBoneTransform(o, u)),
              l.applyMatrix4(a.matrixWorld),
              c.applyMatrix4(a.matrixWorld),
              u.applyMatrix4(a.matrixWorld),
              function (t, e, o) {
                p.subVectors(o, e),
                  f.subVectors(t, e),
                  p.cross(f).normalize(),
                  m.copy(p).normalize(),
                  !0 === n
                    ? (s.setFloat32(i, m.x, !0),
                      i += 4,
                      s.setFloat32(i, m.y, !0),
                      i += 4,
                      s.setFloat32(i, m.z, !0),
                      i += 4)
                    : (s += `\tfacet normal ` + m.x + ` ` + m.y + ` ` + m.z + `\n`,
                      s += `\t\touter loop\n`)
              }(l, c, u),
              y(l),
              y(c),
              y(u),
              !0 === n
                ? (s.setUint16(i, 0, !0), i += 2)
                : (s += `\t\tendloop\n`, s += `\tendfacet\n`)
          }
          function y(t) {
            !0 === n
              ? (s.setFloat32(i, t.x, !0),
                i += 4,
                s.setFloat32(i, t.y, !0),
                i += 4,
                s.setFloat32(i, t.z, !0),
                i += 4)
              : s += `\t\t\tvertex ` + t.x + ` ` + t.y + ` ` + t.z + `\n`
          }
        }
      }
    },
  }])
